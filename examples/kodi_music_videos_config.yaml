# This example shows how to download and format a Youtube video OR playlist
# to display in Kodi as a music video. Kodi requires music videos to be in
# a shared directory, so we will configure this to make the output directory
# formatted as:
#
#   /path/to/Music Videos
#       Elton John - Rocketman.jpg
#       Elton John - Rocketman.mp4
#       Elton John - Rocketman.nfo
#       System of a Down - Chop Suey.jpg
#       System of a Down - Chop Suey.mp4
#       System of a Down - Chop Suey.nfo
#       ...
#
configuration:
  working_directory: '.ytdl-sub-downloads'

presets:
  yt_music_video:
    # Youtube playlists are our source/download strategy. However, this
    # can be overwritten to download music videos from a 'channel' or a
    # single 'video'
    youtube:
      download_strategy: "playlist"

    # For advanced YTDL users only.
    # It is wise to leave ignoreerrors=True to avoid errors for things
    # like age-restricted videos in case you have not set your cookie.
    ytdl_options:
      ignoreerrors: True

    # For each video downloaded, set the file and thumbnail name here.
    # We set both with {music_video_name}, which is a variable we define in
    # the overrides section further below to represent consistent naming format.
    #
    # Another field worth mentioning is maintain_download_archive=True. This
    # is generally a good thing to enable with playlists because it will
    # store previously downloaded video ids to tell YTDL not to re-download
    # them on a successive invocation.
    output_options:
      output_directory: "{music_video_directory}"
      file_name: "{music_video_name}.{ext}"
      thumbnail_name: "{music_video_name}.jpg"
      maintain_download_archive: True

    # Always convert the video thumbnail to jpg
    # TODO: always convert all thumbnails to jpg in code
    convert_thumbnail:
      to: "jpg"

    # For each video downloaded, add a music video NFO file for it. Populate it
    # with tags that Kodi will read and use to display it in the music or music
    # videos section.
    nfo_tags:
      nfo_name: "{music_video_name}.nfo"
      nfo_root: "musicvideo"
      tags:
        artist: "{artist}"
        title: "{title}"
        album: "Music Videos"
        year: "{upload_year}"

    # Overrides is a section where we can define our own variables, and use them in
    # any other section. We define our music video directory and episode file name
    # here, which gets reused above for the video, thumbnail, and NFO file.
    overrides:
      music_video_directory: "path/to/Music Videos"
      music_video_name: "{sanitized_artist} - {sanitized_title}"
